<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<title>Процессы (Отладка с помощью GDB)</title>

<meta name="description" content="Процессы (Отладка с помощью GDB)">
<meta name="keywords" content="Процессы (Отладка с помощью GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html" rel="start" title="Top">
<link href="Alfavitnyi-ukazatelx.html" rel="index" title="Алфавитный указатель">
<link href="Alfavitnyi-ukazatelx.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Vypolnenie.html" rel="up" title="Выполнение">
<link href="Ostanovka.html" rel="next" title="Остановка">
<link href="Niti.html" rel="prev" title="Нити">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="ru">
<span id="g_t_041f_0440_043e_0446_0435_0441_0441_044b"></span><div class="header">
<p>
Previous: <a href="Niti.html" accesskey="p" rel="prev">Нити</a>, Up: <a href="Vypolnenie.html" accesskey="u" rel="up">Выполнение</a> &nbsp; [<a href="Alfavitnyi-ukazatelx.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Alfavitnyi-ukazatelx.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Otladka-mnogonitevykh-programm"></span><h3 class="section">4.10 Отладка многонитевых программ</h3>

<span id="index-fork_002c-otladka-programm_002c-ispolxzuiushchikh-etot-vyzov"></span>
<span id="index-mnogie-processy"></span>
<p>В большинстве систем GDB не имеет специальной поддержки для
отладки программ, создающих дополнительные процессы с помощью функции
<code>fork</code>.  Когда программа вызывает <code>fork</code>, GDB будет
продолжать отладку родительского процесса, а дочерний процесс будет
выполняться беспрепятственно.  Если выполнение дочернего процесса дойдет
до места, где вы установили точку останова, дочерний процесс получит
сигнал <code>SIGTRAP</code>, который приведет к остановке процесса (если он не
перехватывает этот сигнал).
</p>
<p>Однако, если вы хотите отладить дочерний процесс, существует достаточно
простое решение.  Поместите вызов <code>sleep</code> в код программы, который
дочерний процесс выполнит после <code>fork</code>.  Может быть удобным
вызывать <code>sleep</code>, только если установлена определенная переменная
среды, или если существует определенный файл, так что задержка не будет
происходить, если вы не захотите отлаживать дочерний процесс.
Пока дочерний процесс спит, используйте программу <code>ps</code> для
получения его идентификатора.  Затем укажите GDB
(новому экземпляру GDB, если вы отлаживаете также и родительский
процесс) присоединиться к дочернему процессу (see <a href="Prisoedinenie.html">Присоединение</a>).
Начиная с этого момента, вы можете отлаживать дочерний процесс точно
так же, как любой другой процесс, к которому вы присоединились.
</p>
<p>В системе HP-UX (только в версиях 11.x и более поздних?) GDB
предоставляет средства для отладки программ, которые создают
дополнительные процессы, используя функции <code>fork</code> или <code>vfork</code>.
</p>
<p>По умолчанию, когда программа ветвится, GDB будет продолжать
отладку родительского процесса, а дочерний процесс будет выполняться
беспрепятственно.
</p>
<p>Если вы хотите отлаживать дочерний процесс вместо родительского,
используйте команду <code>set&nbsp;<span class="nolinebreak">follow-fork-mode</span></code><!-- /@w -->.
</p>
<dl compact="compact">
<dd><span id="index-set-follow_002dfork_002dmode"></span>
</dd>
<dt><code>set follow-fork-mode <var>режим</var></code></dt>
<dd><p>Устанавливает реакцию отладчика на вызов <code>fork</code> или <code>vfork</code> в
программе.  Вызов <code>fork</code> или <code>vfork</code> создает новый процесс.
<var>режим</var> может быть:
</p>
<dl compact="compact">
<dt><code>parent</code></dt>
<dd><p>После ветвления отлаживается исходный процесс.  Дочерний процесс
выполняется беспрепятственно.  Это поведение по умолчанию.
</p>
</dd>
<dt><code>child</code></dt>
<dd><p>После ветвления отлаживается новый процесс.  Родительский процесс
выполняется беспрепятственно.
</p>
</dd>
<dt><code>ask</code></dt>
<dd><p>Отладчик будет запрашивать один из этих вариантов.
</p></dd>
</dl>

</dd>
<dt><code>show follow-fork-mode</code></dt>
<dd><p>Отображает текущую реакцию отладчика на вызов <code>fork</code> или
<code>vfork</code>.
</p></dd>
</dl>

<p>Если вы запрашиваете отладку дочернего процесса, и за
<code>vfork</code> следует <code>exec</code>, GDB выполняет новую программу
до первой установленной в ней точки останова.  Если в вашей исходной
программе была установлена точка останова на функции <code>main</code>,
она будет также установлена на <code>main</code> в
дочернем процессе.
</p>
<p>Когда дочерний процесс порождается вызовом <code>vfork</code>, вы не можете
отлаживать дочерний или родительский процесс до тех пор, пока не
завершится вызов <code>exec</code>.
</p>
<p>Если вы даете GDB команду <code>run</code> после выполнения
<code>exec</code>, новая программа стартует заново.  Чтобы перезапустить
родительский процесс, используйте команду <code>file</code> с именем
выполняемого файла родительской программы в качестве аргумента.
</p>
<p>Вы можете использовать команду <code>catch</code>, чтобы остановить
GDB, когда сделан вызов <code>fork</code>, <code>vfork</code> или
<code>exec</code>.  See <a href="Ustanovka-tochek-perekhvata.html">Установка точек перехвата</a>.
</p>
<hr>
<div class="header">
<p>
Previous: <a href="Niti.html" accesskey="p" rel="prev">Нити</a>, Up: <a href="Vypolnenie.html" accesskey="u" rel="up">Выполнение</a> &nbsp; [<a href="Alfavitnyi-ukazatelx.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Alfavitnyi-ukazatelx.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
