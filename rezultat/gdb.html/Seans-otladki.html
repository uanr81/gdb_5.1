<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<title>Сеанс отладки (Отладка с помощью GDB)</title>

<meta name="description" content="Сеанс отладки (Отладка с помощью GDB)">
<meta name="keywords" content="Сеанс отладки (Отладка с помощью GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html" rel="start" title="Top">
<link href="Alfavitnyi-ukazatelx.html" rel="index" title="Алфавитный указатель">
<link href="Alfavitnyi-ukazatelx.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Udalennyi.html" rel="up" title="Удаленный">
<link href="Protokol.html" rel="next" title="Протокол">
<link href="Nachalxnaya-zagruzka.html" rel="prev" title="Начальная загрузка">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="ru">
<span id="g_t_0421_0435_0430_043d_0441-_043e_0442_043b_0430_0434_043a_0438"></span><div class="header">
<p>
Next: <a href="Protokol.html" accesskey="n" rel="next">Протокол</a>, Previous: <a href="Nachalxnaya-zagruzka.html" accesskey="p" rel="prev">Начальная загрузка</a>, Up: <a href="Udalennyi.html" accesskey="u" rel="up">Удаленный</a> &nbsp; [<a href="Alfavitnyi-ukazatelx.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Alfavitnyi-ukazatelx.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Sobiraem-vse-vmeste"></span><h4 class="subsubsection">13.4.1.3 Собираем все вместе</h4>

<span id="index-obzor-udalennoi-posledovatelxnoi-otladki"></span>
<p>Вкратце, когда ваша программа готова к отладке, вы должны проделать
следующие шаги.
</p>
<ol>
<li> Убедитесь, что вы определили поддерживающие процедуры низкого уровня
(see <a href="Nachalxnaya-zagruzka.html">Что вы должны сделать для заглушки</a>):
<div class="display">
<pre class="display"><code>getDebugChar</code>, <code>putDebugChar</code>,
<code>flush_i_cache</code>, <code>memset</code>, <code>exceptionHandler</code>.
</pre></div>

</li><li> Вставьте следующие строки в начале вашей программы:

<div class="example">
<pre class="example">set_debug_traps();
breakpoint();
</pre></div>

</li><li> Для заглушки 680x0, вы должны предоставить переменную
<code>exceptionHook</code>.  Обычно вы используете просто

<div class="example">
<pre class="example">void (*exceptionHook)() = 0;
</pre></div>

<p>если до вызова <code>set_debug_traps</code> вы установили ее для
указания на функцию в вашей программе.  Эта функция вызывается, когда
GDB продолжает выполнение после останова на ловушке (например,
ошибка шины).
Функция, указанная <code>exceptionHook</code>, вызывается с одним
параметром типа <code>int</code>, который является номером исключения.
</p>
</li><li> Откомпилируйте и скомпонуйте вместе: вашу программу, отладочную
заглушку GDB для вашей целевой архитектуры и
подпрограммы поддержки.

</li><li> Убедитесь, что у вас есть последовательное соединение между вашей целевой
и рабочей машинами, и идентифицируйте последовательный порт на
рабочей машине.

</li><li> Загрузите вашу программу на целевую машину (или поместите ее туда
любыми средствами, предоставляемыми производителем) и запустите ее.

</li><li> Для начала удаленной отладки, запустите GDB на рабочей машине
и укажите в качестве выполняемого файла программу, которая выполняется
на удаленной машине.  Это сообщает GDB, как найти символы и
содержание неизменяемых областей вашей программы.

</li><li> <span id="index-posledovatelxnaya-liniya_002c-target-remote"></span>
Установите связь, используя команду <code>target remote</code>.  Ее
аргументы определяют, как взаимодействовать с целевой машиной &mdash; либо
через устройство, подключенное к последовательной линии,
либо через порт TCP (обычно подключенный к терминальному серверу, который,
в свою очередь, имеет последовательную линию до цели).  Например,
чтобы использовать последовательную линию, присоединенную к устройству
<samp>/dev/ttyb</samp>, выполните:

<div class="example">
<pre class="example">target remote /dev/ttyb
</pre></div>

<span id="index-TCP_002dport_002c-target-remote"></span>
<p>Чтобы использовать TCP-соединение, используйте аргумент в форме
<code><var>машина</var>:порт</code>.  Например, для соединения с портом 2828 на
терминальном сервере <code>manyfarms</code>:
</p>
<div class="example">
<pre class="example">target remote manyfarms:2828
</pre></div>
</li></ol>

<p>Теперь вы можете использовать все обычные команды для исследования и изменения
данных, пошагового выполнения и продолжения исполнения удаленной
программы.
</p>
<p>Для возобновления выполнения удаленной программы и прекращения ее
отладки, используйте команду <code>detach</code>.
</p>
<span id="index-preryvanie-udalennoi-programmy"></span>
<span id="index-udalennye-programmy_002c-preryvanie"></span>
<p>Всякий раз, когда GDB ожидает удаленную программу, если вы вводите
знак прерывания (часто <kbd>C-C</kbd>), GDB пытается остановить
программу.  Это может привести или не привести к успеху, частично в
зависимости от аппаратных средств и последовательных драйверов, которые
использует удаленная система.  Если вы снова введете знак прерывания,
GDB выведет такое приглашение:
</p>
<div class="example">
<pre class="example">Interrupted while waiting for the program.
Give up (and stop debugging it)?  (y or n)
</pre></div>

<p>Если вы введете <kbd>y</kbd>, GDB прекратит сеанс удаленной отладки.
(Если вы позже решите попытаться снова, вы можете вновь
использовать <code>target remote</code>, чтобы соединиться еще раз.)  Если вы
введете <kbd>n</kbd>, GDB вернется к ожиданию.
</p>
<hr>
<div class="header">
<p>
Next: <a href="Protokol.html" accesskey="n" rel="next">Протокол</a>, Previous: <a href="Nachalxnaya-zagruzka.html" accesskey="p" rel="prev">Начальная загрузка</a>, Up: <a href="Udalennyi.html" accesskey="u" rel="up">Удаленный</a> &nbsp; [<a href="Alfavitnyi-ukazatelx.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Alfavitnyi-ukazatelx.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
