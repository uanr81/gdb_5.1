<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<title>Установка точек наблюдения (Отладка с помощью GDB)</title>

<meta name="description" content="Установка точек наблюдения (Отладка с помощью GDB)">
<meta name="keywords" content="Установка точек наблюдения (Отладка с помощью GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html" rel="start" title="Top">
<link href="Alfavitnyi-ukazatelx.html" rel="index" title="Алфавитный указатель">
<link href="Alfavitnyi-ukazatelx.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Tochki-ostanova.html" rel="up" title="Точки останова">
<link href="Ustanovka-tochek-perekhvata.html" rel="next" title="Установка точек перехвата">
<link href="Ustanovka-tochek-ostanova.html" rel="prev" title="Установка точек останова">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="ru">
<span id="g_t_0423_0441_0442_0430_043d_043e_0432_043a_0430-_0442_043e_0447_0435_043a-_043d_0430_0431_043b_044e_0434_0435_043d_0438_044f"></span><div class="header">
<p>
Next: <a href="Ustanovka-tochek-perekhvata.html" accesskey="n" rel="next">Установка точек перехвата</a>, Previous: <a href="Ustanovka-tochek-ostanova.html" accesskey="p" rel="prev">Установка точек останова</a>, Up: <a href="Tochki-ostanova.html" accesskey="u" rel="up">Точки останова</a> &nbsp; [<a href="Alfavitnyi-ukazatelx.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Alfavitnyi-ukazatelx.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Ustanovka-tochek-nabliudeniya"></span><h4 class="subsection">5.1.2 Установка точек наблюдения</h4>

<span id="index-ustanovka-tochek-nabliudeniya"></span>
<span id="index-programmnye-tochki-nabliudeniya"></span>
<span id="index-apparatnye-tochki-nabliudeniya"></span>
<p>Вы можете использовать точку наблюдения для остановки
выполнения, как только изменится значение какого-либо выражения, не
предсказывая конкретное место, где это может произойти.
</p>
<p>В зависимости от вашей системы, точки наблюдения могут быть реализованы
программно или аппаратно.  GDB осуществляет программную реализацию
точек наблюдения путем пошагового выполнения вашей программы и проверки
значения переменной на каждом шаге, что в сотни раз медленнее
нормального выполнения.  (Но, тем не менее, это того стоит, если нужно найти
ошибку в программе, когда вы не представляете, в какой части она
находится.)
</p>
<p>В некоторых системах, таких как HP-UX, Linux и некоторых других
платформах, базирующихся на x86, GDB включает поддержку для
аппаратных точек наблюдения, которые не замедляют выполнение вашей
программы.
</p>
<dl compact="compact">
<dd><span id="index-watch"></span>
</dd>
<dt><code>watch <var>выраж</var></code></dt>
<dd><p>Устанавливает точку наблюдения за выражением.  GDB остановит
программу, когда <var>выраж</var> сохраняется программой, и его значение
изменяется.
</p>
<span id="index-rwatch"></span>
</dd>
<dt><code>rwatch <var>выраж</var></code></dt>
<dd><p>Устанавливает точку наблюдения, которая остановит программу, когда
наблюдаемое <var>выраж</var> считывается программой.
</p>
<span id="index-awatch"></span>
</dd>
<dt><code>awatch <var>выраж</var></code></dt>
<dd><p>Устанавливает точку наблюдения, которая остановит программу, когда
<var>выраж</var> либо считывается, либо сохраняется программой.
</p>
<span id="index-info-watchpoints"></span>
</dd>
<dt><code>info watchpoints</code></dt>
<dd><p>Эта команда печатает список точек наблюдения, останова и перехвата; это
то же самое, что и <code>info break</code>.
</p></dd>
</dl>

<p>Когда это возможно, GDB устанавливает <em>аппаратную точку
наблюдения</em>.  Аппаратные точки наблюдения выполняются очень быстро, и
отладчик сообщает об изменении значения точно в месте инструкции, где это
изменение произошло.  Если GDB не может установить аппаратную
точку наблюдения, он устанавливает программную точку наблюдения, которая
выполняется намного медленнее и сообщает об изменении значения на следующем
операторе, а не инструкции, после появления изменения.
</p>
<p>Когда вы даете команду <code>watch</code>, GDB сообщает
</p>
<div class="example">
<pre class="example">Hardware watchpoint <var>номер</var>: <var>выраж</var>
</pre></div>

<p>если ему удалось установить аппаратную точку наблюдения.
</p>
<p>В настоящее время, команды <code>awatch</code> и <code>rwatch</code> могут
устанавливать только аппаратные точки наблюдения, так как доступы к данным,
которые не изменяют величины наблюдаемого выражения, не могут быть
замечены без исследования каждой инструкции во время ее выполнения, а
GDB пока этого не делает.  Если GDB обнаруживает, что
не может установить аппаратную точку останова командами <code>awatch</code>
или <code>rwatch</code>, он напечатает сообщение, аналогичное этому:
</p>
<div class="example">
<pre class="example">Expression cannot be implemented with read/access watchpoint.<a id="DOCF6" href="#FOOT6">(6)</a>
</pre></div>

<p>Иногда GDB не может установить аппаратную точку наблюдения из-за
того, что тип данных наблюдаемого выражения занимает больше места, чем
допускает аппаратная точка наблюдения на целевой платформе.  Например,
некоторые системы позволяют наблюдать за областями, занимающими до 4
байт; на таких системах вы не можете устанавливать аппаратные точки
наблюдения за выражениями, которые в результате дают число
с плавающей точкой двойной точности (которое обычно занимает 8 байт).  В
качестве одного из решений, можно разбить большую область на несколько
меньших областей, и затем наблюдать за каждой из них с помощью отдельной
точки наблюдения.
</p>
<p>Если вы установите слишком много аппаратных точек наблюдения,
GDB может быть не в состоянии задействовать их все, когда вы
возобновите выполнение вашей программы.  Так как точное количество
активных точек наблюдения неизвестно до того момента, как ваша
программа должна возобновить выполнение, GDB может быть не в
состоянии предупредить вас об этом, когда вы устанавливаете точку
наблюдения, и предупреждение будет напечатано, только когда программа
возобновит выполнение:
</p>
<div class="example">
<pre class="example">Hardware watchpoint <var>номер</var>: Could not insert watchpoint<a id="DOCF7" href="#FOOT7">(7)</a>
</pre></div>

<p>Если это происходит, удалите или отключите некоторые точки наблюдения.
</p>
<p>SPARClite DSU будет генерировать ловушки, когда программа обращается к
некоторым данным или адресу инструкции, которые отведены для отладочных
регистров.  Для адресов данных, DSU упрощает команду <code>watch</code>.
Однако, аппаратные регистры точек останова могут принять только две
точки наблюдения за данными, и обе точки наблюдения должны быть одного
типа.  Например, вы можете установить две точки наблюдения с помощью
команды <code>watch</code>, две с помощью команды <code>rwatch</code>, <strong>или</strong>
две с помощью команды <code>awatch</code>, но вы не можете установить одну
точку наблюдения с помощью одной команды, а другую с помощью другой.
GDB не примет команду, если вы попытаетесь совместить различные
точки наблюдения.  Удалите или отключите неиспользуемые точки наблюдения
перед установкой новых.
</p>
<p>Если вы вызываете функцию интерактивно, используя <code>print</code> или
<code>call</code>, все установленные вами точки наблюдения будут неактивными
до тех, пор пока GDB не достигнет точки останова другого типа,
или пока вызов не завершится.
</p>
<p>GDB автоматически удаляет точки наблюдения, которые наблюдают
за локальными переменными или за выражениями, которые используют такие
переменные, когда они выходят из области видимости, то есть когда
выполнение покидает блок, в котором эти переменные были определены.  В
частности, когда отлаживаемая программа завершается, <em>все</em>
локальные переменные выходят из области видимости, и таким образом
остаются установленными только те точки наблюдения, которые наблюдают за
глобальными переменными.  Если вы снова запустите программу, вы должны
будете заново установить все такие точки наблюдения.  Одним из способов
сделать это будет установить точку останова на входе в функцию
<code>main</code>, и, когда программа остановится, установить все остальные точки
наблюдения.
</p>
<blockquote>
<span id="index-tochki-nabliudeniya-i-niti"></span>
<span id="index-niti-i-tochki-nabliudeniya"></span>
<p><em>Предупреждение:</em> В многонитевых программах точки наблюдения
являются лишь частично полезными.  С текущей реализацией точек
наблюдения, GDB может наблюдать за величиной выражения
только <em>в одной нити</em>.  Если вы уверены, что выражение может измениться
только вследствие действий внутри текущей нити (и если вы также уверены,
что никакая другая нить не может стать текущей), то вы можете
использовать точки наблюдения как обычно.  Однако, GDB может не
заметить, когда действия в другой нити изменяют выражение.
</p>
<p><em>Предупреждение для HP-UX:</em> В многонитевых программах программные
точки наблюдения
являются лишь частично полезными.  Если GDB создает программную
точку наблюдения, она может наблюдать за величиной выражения только
<em>в одной нити</em>.  Если вы уверены, что выражение может измениться
только вследствие действий внутри текущей нити (и если вы также уверены,
что никакая другая нить не может стать текущей), то вы можете использовать
программные точки наблюдения как обычно.  Однако, GDB может не
заметить, когда действия в другой нити изменяют выражение.
(Аппаратные же точки наблюдения напротив, наблюдают за выражением во
всех нитях.)
</p></blockquote>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT6" href="#DOCF6">(6)</a></h3>
<p>Выражение не может быть реализовано с помощью точки наблюдения чтения/доступа.  <i>(Прим. переводчика)</i></p>
<h5><a id="FOOT7" href="#DOCF7">(7)</a></h3>
<p>Аппаратная точка наблюдения <var>номер</var>: Не удается поместить точку наблюдения  <i>(Прим. переводчика)</i></p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Ustanovka-tochek-perekhvata.html" accesskey="n" rel="next">Установка точек перехвата</a>, Previous: <a href="Ustanovka-tochek-ostanova.html" accesskey="p" rel="prev">Установка точек останова</a>, Up: <a href="Tochki-ostanova.html" accesskey="u" rel="up">Точки останова</a> &nbsp; [<a href="Alfavitnyi-ukazatelx.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Alfavitnyi-ukazatelx.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
