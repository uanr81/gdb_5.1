<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<title>Остановка нитей (Отладка с помощью GDB)</title>

<meta name="description" content="Остановка нитей (Отладка с помощью GDB)">
<meta name="keywords" content="Остановка нитей (Отладка с помощью GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html" rel="start" title="Top">
<link href="Alfavitnyi-ukazatelx.html" rel="index" title="Алфавитный указатель">
<link href="Alfavitnyi-ukazatelx.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Ostanovka.html" rel="up" title="Остановка">
<link href="Stek.html" rel="next" title="Стек">
<link href="Signaly.html" rel="prev" title="Сигналы">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="ru">
<span id="g_t_041e_0441_0442_0430_043d_043e_0432_043a_0430-_043d_0438_0442_0435_0439"></span><div class="header">
<p>
Previous: <a href="Signaly.html" accesskey="p" rel="prev">Сигналы</a>, Up: <a href="Ostanovka.html" accesskey="u" rel="up">Остановка</a> &nbsp; [<a href="Alfavitnyi-ukazatelx.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Alfavitnyi-ukazatelx.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Ostanovka-i-zapusk-mnogonitevykh-programm"></span><h3 class="section">5.4 Остановка и запуск многонитевых программ</h3>

<p>Когда ваша программа имеет несколько нитей выполнения
(see <a href="Niti.html">Отладка многонитевых программ</a>), вы можете выбрать,
установить точки останова либо во всех, либо в каких-то отдельных нитях.
</p>
<dl compact="compact">
<dd><span id="index-tochki-ostanova-i-niti"></span>
<span id="index-tochki-ostanova-v-nityakh"></span>
<span id="index-break-_2026-thread-nomer_002dniti"></span>
</dd>
<dt><code>break <var>ном-строки</var> thread <var>номер-нити</var></code></dt>
<dt><code>break <var>ном-строки</var> thread <var>номер-нити</var> if &hellip;</code></dt>
<dd><p><var>ном-строки</var> определяет строки исходного текста; существует
несколько способов их задания, но результат всегда один и тот
же &mdash; указание строки исходного текста.
</p>
<p>Используйте классификатор &lsquo;<samp>thread <var>номер-нити</var></samp>&rsquo; с командой точки
останова, чтобы указать GDB, что вы хотите остановить программу,
только когда определенная нить достигнет этой точки.
<var>номер-нити</var> &mdash; это один из числовых идентификаторов нити,
присвоенный GDB, показываемый в первой колонке при выводе
&lsquo;<samp>info threads</samp>&rsquo;.
</p>
<p>Если при установке точки останова вы не укажете &lsquo;<samp>thread
<var>номер-нити</var></samp>&rsquo;, точка останова будет действовать для <em>всех</em>
нитей вашей программы.
</p>
<p>Вы также можете использовать классификатор <code>thread</code> для условных
точек останова; в этом случае, поместите &lsquo;<samp>thread <var>номер-нити</var></samp>&rsquo;
перед условием точки останова, вот так:
</p>
<div class="example">
<pre class="example">(gdb) break frik.c:13 thread 28 if bartab &gt; lim
</pre></div>

</dd>
</dl>

<span id="index-ostanovlennye-niti"></span>
<span id="index-niti_002c-ostanovlennye"></span>
<p>При любой остановке вашей программы под управлением GDB
прекращается выполнение <em>всех</em> нитей, а не только текущей.  Это
позволяет вам исследовать полное состояние программы, включая
переключение между нитями, не опасаясь, что это может изменить что-либо в
дальнейшем.
</p>
<span id="index-prodolzhenie-s-nityami"></span>
<span id="index-niti_002c-prodolzhenie"></span>
<p>Наоборот, когда вы снова запускаете программу, <em>все</em> нити
начинают выполняться.  <em>Это верно даже при пошаговом выполнении</em>
такими командами, как <code>step</code> или <code>next</code>.
</p>
<p>В частности, GDB не может пошагово выполнять все нити
параллельно.  Так как планированием выполнения нити занимается
операционная система отлаживаемой цели (не контролируемая GDB),
то пока в текущей
нити выполняется один шаг, в других может выполниться несколько.  Более
того, когда выполнение программы останавливается, другие потоки вообще могут
остановиться в середине операторов, а не на границе между ними.
</p>
<p>Вы даже можете обнаружить, что после продолжения исполнения или
после пошагового выполнения ваша программа остановилась в другой
нити.  Это случается всякий раз, когда другая нить достигает точки
останова, получает сигнал, или в ней возникает исключительная ситуация,
прежде чем первая нить завершает выполнение того, что вы запросили.
</p>
<p>В некоторых операционных системах вы можете заблокировать планировщик
заданий и тем самым позволить выполняться только одной нити.
</p>
<dl compact="compact">
<dt><code>set scheduler-locking <var>режим</var></code></dt>
<dd><p>Устанавливает режим блокировки планировщика заданий.  Если он установлен
в <code>off</code>, то блокировки нет и любая нить может выполняться в любое
время.  Если этот режим установлен в <code>on</code>, то только текущая нить
может выполняться, когда выполнение продолжается.
Режим <code>step</code> производит оптимизацию для пошагового выполнения.  Он
не дает другим нитям &ldquo;захватывать приглашение&rdquo; путем приоритетного
прерывания обслуживания текущей нити во время пошагового выполнения.
Другие нити едва ли получат возможность начать выполнение, когда вы
выполняете очередной шаг.  С большей вероятностью они начнут выполняться,
когда вы выполняете команду <code>next</code> на вызове функции, и им ничто
не помешает выполняться, когда вы используете такие команды, как
&lsquo;<samp>continue</samp>&rsquo;, &lsquo;<samp>until</samp>&rsquo; или &lsquo;<samp>finish</samp>&rsquo;.  Однако, если другие
нити не достигнут точки останова в течение отведенного им для
выполнения времени, они никогда не перехватят приглашение GDB у
отлаживаемой вами нити.
</p>
</dd>
<dt><code>show scheduler-locking</code></dt>
<dd><p>Отобразить текущий режим блокировки.
</p></dd>
</dl>


<hr>
<div class="header">
<p>
Previous: <a href="Signaly.html" accesskey="p" rel="prev">Сигналы</a>, Up: <a href="Ostanovka.html" accesskey="u" rel="up">Остановка</a> &nbsp; [<a href="Alfavitnyi-ukazatelx.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Alfavitnyi-ukazatelx.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
